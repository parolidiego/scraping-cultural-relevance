---
title: "The Guardian API"
author: "David Pereiro Pol"
date: "2025-03-16"
output: html_document
---

```{r setup, include=FALSE}
usethis::edit_r_environ()
# file.edit("~/.Renviron")
# Sys.getenv("API_KEY_NYT")
```

```{r}
library(httr2)
library(tidyverse)
main_link <- "https://content.guardianapis.com/search"

# Trying out a query to understand structure
data <- main_link |> 
  request() |>
  req_url_query(`api-key` = Sys.getenv("API_KEY_GUARDIAN"), format = "json",
                `from-date` = "2014-10-10", `to-date` = "2014-10-30", 
                `order-by` = "relevance", `page-size` = 50) |> 
  req_perform() |> 
  resp_body_json(simplifyVector = TRUE)

data$response$results$webTitle
```